(function(t){function e(e){for(var a,r,s=e[0],c=e[1],l=e[2],d=0,f=[];d<s.length;d++)r=s[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&f.push(i[r][0]),i[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);u&&u(e);while(f.length)f.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(a=!1)}a&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},i={app:0},o=[];function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/city-seeker-frontend/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var u=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},1:function(t,e){},"2a84":function(t,e,n){"use strict";var a=n("92f3"),i=n.n(a);i.a},"49bb":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("main-view")],1)},o=[],r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-view"},[n("app-header"),n("div",{staticClass:"content"},[n("router-view")],1),n("app-footer")],1)},s=[],c=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},l=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"border-top pt-4 mt-4"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col"},[n("h6",[t._v("Contact")]),n("ul",{staticClass:"list-unstyled"},[n("li",[n("a",{staticClass:"text-muted",attrs:{href:"mailto:graffcameron@gmail.com",target:"_blank"}},[t._v("Email Us")])])])]),n("div",{staticClass:"col"},[n("h6",[t._v("Source Code")]),n("ul",{staticClass:"list-unstyled"},[n("li",[n("a",{staticClass:"text-muted",attrs:{href:"https://github.com/camgraff/city-seeker-frontend",target:"_blank"}},[t._v("Front-end")])]),n("li",[n("a",{staticClass:"text-muted",attrs:{href:"https://github.com/camgraff/city-seeker-backend",target:"_blank"}},[t._v("Back-end")])])])])])])}],u={},d=u,f=(n("b67c"),n("2877")),p=Object(f["a"])(d,c,l,!1,null,"5578333a",null),m=p.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-navbar",{staticClass:"navbar",attrs:{type:"dark"}},[n("b-navbar-brand",{attrs:{to:"/"}},[t._v("City Seeker")]),n("b-nav",[n("b-nav-item",{attrs:{to:"/"}},[t._v("Play")])],1)],1)},b=[],v={},g=v,y=(n("fd51"),Object(f["a"])(g,h,b,!1,null,"cd48fbd8",null)),E=y.exports,S={components:{AppFooter:m,AppHeader:E}},O=S,w=(n("5f06"),Object(f["a"])(O,r,s,!1,null,"22fec50a",null)),M=w.exports,k={components:{MainView:M}},C=k,P=(n("9b80"),Object(f["a"])(C,i,o,!1,null,"1a7cb8ad",null)),j=P.exports,L=n("8c4f"),T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.displayComponent,{tag:"component",attrs:{id:t.id},on:{startGame:function(e){t.isGameStarted=!0}}})},R=[],I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-container",{staticClass:"lobby px-5",attrs:{fluid:""}},[n("b-modal",{attrs:{centered:"","ok-only":"","hide-header-close":"","no-close-on-backdrop":"","no-close-on-esc":"",title:"Enter Display Name","ok-disabled":""==t.displayName},on:{ok:t.handleOk},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[n("b-form-input",{attrs:{state:t.nameIsValid,placeholder:"Enter name here...",required:""},model:{value:t.displayName,callback:function(e){t.displayName=e},expression:"displayName"}})],1),n("b-modal",{attrs:{centered:"","ok-only":"",title:"Invite Friends"},model:{value:t.invitePlayers,callback:function(e){t.invitePlayers=e},expression:"invitePlayers"}},[n("p",[t._v("Send your friend the link below to have them join your game!")]),n("b-form-input",{attrs:{value:t.url,id:"invite-url",readonly:""}}),n("b-button",{staticClass:"ml-2",attrs:{title:"Copy Invite URL",variant:"secondary"},on:{click:t.copyURL}},[n("b-icon-clipboard")],1)],1),n("b-button",{staticClass:"float-right",attrs:{variant:"info"},on:{click:function(e){t.invitePlayers=!0}}},[t._v("Invite Friends")]),n("h1",{},[t._v("Lobby")]),n("b-table-lite",{attrs:{items:t.players}}),n("b-button",{attrs:{variant:"primary"},on:{click:function(){return t.startGame(t.id)}}},[t._v("Start Game")])],1)},A=[],G=(n("d81d"),n("5530")),x=n("8055"),D=n.n(x),U=n("2f62"),K={props:{id:{type:String,required:!0}},data:function(){return{showModal:!0,displayName:"",nameIsValid:null,invitePlayers:!1}},computed:Object(G["a"])(Object(G["a"])({},Object(U["c"])(["getPlayers"])),{},{players:function(){return this.getPlayers.map((function(t){return{name:t.username}}))},url:function(){return window.location.href}}),created:function(){var t=this;this.initSocket(),this.registerListener({event:"userJoined",callback:function(e){t.addPlayer(e)}}),this.registerListener({event:"startGame",callback:function(){t.$emit("startGame")}})},methods:Object(G["a"])(Object(G["a"])({},Object(U["b"])(["initSocket","joinGame","registerListener","startGame","addPlayer"])),{},{handleOk:function(t){t.preventDefault(),this.validateForm(),this.nameIsValid&&(this.addPlayer(this.displayName),this.showModal=!1,this.joinGame({gameId:this.id,username:this.displayName}))},validateForm:function(){this.displayName?this.nameIsValid=!0:this.nameIsValid=!1},copyURL:function(){document.getElementById("invite-url").select(),document.execCommand("copy")}})},$=K,N=(n("b409"),Object(f["a"])($,I,A,!1,null,"158c0363",null)),V=N.exports,q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isLoading?t._e():n("b-container",{staticClass:"game-page"},[t.hasGuessed?[n("guess-result",{attrs:{actual:t.location,guess:t.guessedLocation}})]:[n("p",[t._v("Use the street view controls to take a look around. When you are ready, use the map below to guess where you are.")]),n("street-view",{on:{positionChanged:function(e){t.location=e}}}),n("location-guesser",{attrs:{location:t.location},on:{guessLocation:function(e){t.guessedLocation=e}}})]],2)},F=[],Y=(n("d3b7"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"street-view"}})}),J=[],B=(n("96cf"),n("1da1")),z={top:49.3457868,left:-124.7844079,right:-66.9513812,bottom:24.7433195},Z={mounted:function(){this.initializeStreetView()},data:function(){return{initialLocation:{}}},methods:{generateLocation:function(t){return{lat:Math.random()*(t.top-t.bottom)+t.bottom,lng:Math.random()*(t.right-t.left)+t.left}},tryGetStreetView:function(t){var e=this.generateLocation(z);return new Promise((function(n,a){t.getPanorama({location:e,radius:1e6,preference:"nearest"},(function(t,e){n({data:t,status:e})}))}))},initializeStreetView:function(){var t=this;return Object(B["a"])(regeneratorRuntime.mark((function e(){var n,a,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=new window.google.maps.StreetViewService,a=new window.google.maps.StreetViewPanorama(document.getElementById("street-view"),{disableDefaultUI:!0,showRoadLabels:!1}),e.next=4,t.tryGetStreetView(n);case 4:i=e.sent,a.setPano(i.data.location.pano),a.addListener("position_changed",(function(){return t.handlePosChanged(a)})),o=a.addListener("status_changed",(function(){t.initialLocation={lat:a.position.lat(),lng:a.position.lng()},window.google.maps.event.removeListener(o)}));case 8:case"end":return e.stop()}}),e)})))()},handlePosChanged:function(t){function e(t){return t*(Math.PI/180)}this.$emit("positionChanged",{lat:t.position.lat(),lng:t.position.lng()});var n=e(this.initialLocation.lat),a=e(t.position.lat()),i=e(t.position.lng()),o=e(this.initialLocation.lng),r=n-a,s=i-o,c=Math.pow(Math.sin(r/2),2)+Math.cos(n)*Math.cos(a)*Math.pow(Math.sin(s/2),2);c=2*Math.asin(Math.sqrt(c));var l=6371;c*=l}}},H=Z,W=(n("c3c7"),Object(f["a"])(H,Y,J,!1,null,null,null)),Q=W.exports,X=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{attrs:{id:"location-guesser"}}),n("b-button",{attrs:{id:"submit-guess",block:"",disabled:null==t.marker,variant:"primary"},on:{click:t.guessLocation}},[t._v("Submit Guess")])],1)},tt=[],et=6371,nt=(Math.round(2*et*Math.PI/2),{props:{location:{type:Object,required:!0}},mounted:function(){this.initMap()},data:function(){return{marker:null}},methods:{initMap:function(){var t=this,e=2,n=new window.google.maps.Map(document.getElementById("location-guesser"),{center:{lat:0,lng:0},zoom:e,disableDefaultUI:!0,minZoom:e,maxZoom:e});n.addListener("click",(function(e){t.placeMarker(e.latLng,n)}))},placeMarker:function(t,e){null==this.marker?this.marker=new window.google.maps.Marker({position:t,map:e}):this.marker.setPosition(t)},guessLocation:function(){var t={lat:this.marker.getPosition().lat(),lng:this.marker.getPosition().lng()};this.$emit("guessLocation",t);this.calcDistance(this.location.lat,this.location.lng,this.marker.getPosition().lat(),this.marker.getPosition().lng())},calcDistance:function(t,e,n,a){function i(t){return t*(Math.PI/180)}var o=i(t),r=i(n),s=i(e),c=i(a),l=o-r,u=s-c,d=Math.pow(Math.sin(l/2),2)+Math.cos(o)*Math.cos(r)*Math.pow(Math.sin(u/2),2);return d=2*Math.asin(Math.sqrt(d)),d*=et,d}}}),at=nt,it=(n("2a84"),Object(f["a"])(at,X,tt,!1,null,"f6361f34",null)),ot=it.exports,rt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"invite-player"},[n("b-modal",{attrs:{title:"Invite Friends!"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[t._v(" Invite Friends to you game! ")])],1)},st=[],ct={props:{showModal:{type:Boolean,required:!0}}},lt=ct,ut=Object(f["a"])(lt,rt,st,!1,null,null,null),dt=(ut.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"guess-result"},[n("h1",[t._v("Results")]),n("h3",[t._v("You were "+t._s(t.distanceOff)+" Km off on your guess")]),n("div",{attrs:{id:"map"}}),n("round-result-table")],1)}),ft=[],pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"round-result-table"},[n("b-table",{attrs:{items:t.playerScores}})],1)},mt=[],ht={computed:Object(G["a"])(Object(G["a"])({},Object(U["c"])(["getPlayers"])),{},{playerScores:function(){return this.getPlayers.map((function(t){return{name:t.username,score:_.sum(t.scores)}}))}})},bt=ht,vt=Object(f["a"])(bt,pt,mt,!1,null,null,null),gt=vt.exports,_t=6371,yt=_t*Math.PI,Et={components:{RoundResultTable:gt},props:{actual:{type:Object,required:!0},guess:{type:Object,required:!0}},mounted:function(){this.initMap();var t=Math.round((yt-this.distanceOff)/yt*1e3);this.updateScore({score:t,gameId:this.$route.params.id})},data:function(){return{map:null}},computed:{distanceOff:function(){return Math.round(this.calcDistance(this.actual.lat,this.actual.lng,this.guess.lat,this.guess.lng))}},methods:Object(G["a"])(Object(G["a"])({},Object(U["b"])(["updateScore"])),{},{initMap:function(){var t=2;this.map=new window.google.maps.Map(document.getElementById("map"),{center:{lat:0,lng:0},zoom:t,disableDefaultUI:!0,minZoom:t,maxZoom:t,gestureHandling:"none"}),this.placeMarker(this.guess),this.placeMarker(this.actual)},placeMarker:function(t){new window.google.maps.Marker({position:t,map:this.map})},calcDistance:function(t,e,n,a){function i(t){return t*(Math.PI/180)}var o=i(t),r=i(n),s=i(e),c=i(a),l=o-r,u=s-c,d=Math.pow(Math.sin(l/2),2)+Math.cos(o)*Math.cos(r)*Math.pow(Math.sin(u/2),2);return d=2*Math.asin(Math.sqrt(d)),d*=_t,d}})},St=Et,Ot=(n("880f"),Object(f["a"])(St,dt,ft,!1,null,"371b8574",null)),wt=Ot.exports,Mt="AIzaSyA1--4PxBK7cqIjE45D-W2zZvw0JQtrh9s",kt={components:{StreetView:Q,LocationGuesser:ot,GuessResult:wt},props:{id:{type:String,required:!0}},mounted:function(){this.loadGoogleScript(),this.listenForScoreUpdates()},data:function(){return{isLoading:!0,location:{},guessedLocation:{}}},computed:{hasGuessed:function(){return!_.isEmpty(this.guessedLocation)}},methods:Object(G["a"])(Object(G["a"])({},Object(U["b"])(["listenForScoreUpdates"])),{},{loadGoogleScript:function(){var t=this;return new Promise((function(e,n){var a=document.createElement("script");a.src="https://maps.googleapis.com/maps/api/js?key=".concat(Mt),a.addEventListener("load",(function(){t.isLoading=!1,e()})),a.addEventListener("error",(function(t){n(t)})),document.body.appendChild(a)}))}})},Ct=kt,Pt=(n("e043"),Object(f["a"])(Ct,q,F,!1,null,"49395032",null)),jt=Pt.exports,Lt={components:{Lobby:V,Play:jt},data:function(){return{isGameStarted:!1}},computed:{displayComponent:function(){return this.isGameStarted?"Play":"Lobby"}},props:{id:{type:String,required:!0}}},Tt=Lt,Rt=Object(f["a"])(Tt,T,R,!1,null,null,null),It=Rt.exports;a["default"].use(L["a"]);var At,Gt,xt=[{path:"/",redirect:"/game/1234"},{path:"/game/:id",component:It,props:!0}],Dt=new L["a"]({mode:"history",base:"/city-seeker-frontend/",routes:xt}),Ut=Dt,Kt=n("ade3"),$t={SOCKET_SUCCESS:"SOCKET_SUCCESS",SOCKET_JOIN_GAME:"SOCKET_JOIN_GAME",SOCKET_REGISTER_LISTENER:"SOCKET_REGISTER_LISTENER",SOCKET_START_GAME:"SOCKET_START_GAME",SOCKET_UPDATE_SCORE:"SOCKET_UPDATE_SCORE",PLAYER_UPDATE_SCORE:"PLAYER_UPDATE_SCORE",ADD_PLAYER:"ADD_PLAYER"},Nt=$t,Vt={state:function(){return{socket:null}},getters:{},actions:{initSocket:function(t){var e=t.commit,n=D()("city-seeker.herokuapp.com");e(Nt.SOCKET_SUCCESS,n)},joinGame:function(t,e){var n=t.commit;n(Nt.SOCKET_JOIN_GAME,e)},registerListener:function(t,e){var n=t.commit;n(Nt.SOCKET_REGISTER_LISTENER,e)},startGame:function(t,e){var n=t.commit;n(Nt.SOCKET_START_GAME,e)},updateScore:function(t,e){var n=t.commit;n(Nt.SOCKET_UPDATE_SCORE,e)}},mutations:(At={},Object(Kt["a"])(At,Nt.SOCKET_SUCCESS,(function(t,e){t.socket=e})),Object(Kt["a"])(At,Nt.SOCKET_JOIN_GAME,(function(t,e){var n=t.socket,a=e.gameId,i=e.username;n.emit("joinGame",a,i)})),Object(Kt["a"])(At,Nt.SOCKET_REGISTER_LISTENER,(function(t,e){var n=t.socket,a=e.event,i=e.callback;n.on(a,i)})),Object(Kt["a"])(At,Nt.SOCKET_START_GAME,(function(t,e){var n=t.socket;n.emit("startGame",e)})),Object(Kt["a"])(At,Nt.SOCKET_UPDATE_SCORE,(function(t,e){var n=t.socket,a=e.score,i=e.gameId;n.emit("updateScore",a,i)})),At)},qt=Vt,Ft=(n("7db0"),{state:function(){return{players:[]}},getters:{getPlayers:function(t){var e=t.players;return e}},actions:{listenForScoreUpdates:function(t){var e=t.commit;Jt.dispatch("registerListener",{event:"playerScoreUpdated",callback:function(t,n){e(Nt.PLAYER_UPDATE_SCORE,{username:t,score:n})}})},addPlayer:function(t,e){var n=t.commit;n(Nt.ADD_PLAYER,e)}},mutations:(Gt={},Object(Kt["a"])(Gt,Nt.PLAYER_UPDATE_SCORE,(function(t,e){var n=t.players,a=e.username,i=e.score;n.find((function(t){return t.username==a})).scores.push(i)})),Object(Kt["a"])(Gt,Nt.ADD_PLAYER,(function(t,e){var n=t.players;n.push({username:e,scores:[]})})),Gt)}),Yt=Ft;a["default"].use(U["a"]);var Jt=new U["a"].Store({modules:{socket:qt,players:Yt}}),Bt=n("5f5b"),zt=n("b1e0");n("f9e3"),n("2dd8"),n("b7e3");window._=n("2ef0"),a["default"].config.productionTip=!1,a["default"].use(Bt["a"]),a["default"].use(zt["a"]),new a["default"]({router:Ut,store:Jt,render:function(t){return t(j)}}).$mount("#app")},"5f06":function(t,e,n){"use strict";var a=n("782f"),i=n.n(a);i.a},"6de0":function(t,e,n){},"782f":function(t,e,n){},"7dfc":function(t,e,n){},"872f":function(t,e,n){},"880f":function(t,e,n){"use strict";var a=n("872f"),i=n.n(a);i.a},"92f3":function(t,e,n){},9415:function(t,e,n){},"9b80":function(t,e,n){"use strict";var a=n("a4f1"),i=n.n(a);i.a},a4f1:function(t,e,n){},b0df:function(t,e,n){},b409:function(t,e,n){"use strict";var a=n("7dfc"),i=n.n(a);i.a},b67c:function(t,e,n){"use strict";var a=n("9415"),i=n.n(a);i.a},b7e3:function(t,e,n){},c3c7:function(t,e,n){"use strict";var a=n("6de0"),i=n.n(a);i.a},e043:function(t,e,n){"use strict";var a=n("b0df"),i=n.n(a);i.a},fd51:function(t,e,n){"use strict";var a=n("49bb"),i=n.n(a);i.a}});
//# sourceMappingURL=app.2c0af4a0.js.map